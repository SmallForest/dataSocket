<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    var wsurl = 'ws://localhost:2021/ws';
    var websocket;
    if (window.WebSocket) {
        websocket = new WebSocket(wsurl);

        //è¿æ¥å»ºç«‹
        websocket.onopen = function (evevt) {
            console.log("æ­å–œğŸŒ¹ï¼ï¼ï¼ŒæˆåŠŸè¿æ¥ä¸Šws");
            let s = JSON.stringify({name:"lihua"})
            websocket.send(s)
        }
        //æ”¶åˆ°æ¶ˆæ¯
        websocket.onmessage = function (event) {
            console.log("æ¥å—åˆ°æ¶ˆæ¯", event)
            console.log(JSON.parse(event.data))
        }

        //å‘ç”Ÿé”™è¯¯
        websocket.onerror = function (event) {
            console.log("Connected to WebSocket server error");

        }

        //è¿æ¥å…³é—­
        websocket.onclose = function (event) {
            console.log('ws è¿æ¥è¢«æ–­å¼€. ');
            console.log(event)

        }

    }
</script>
</body>
</html>
